<tool id="proteomics_search_interprophet_1" name="InterProphet" version="1.0.0">
	<requirements><requirement type="package">protk</requirement></requirements>
  <description>Combine Peptide Prophet results from multiple search engines</description>

  <command interpreter="ruby">

	interprophet_wrapper.rb $output $use_nss $use_nrs $use_nse $use_nsi $use_nsm --minprob $minprob


	## Inputs.
	${first_input}
	#for $input_file in $input_files:
	${input_file.additional_input}
	#end for  	

  </command>

  <inputs>

	<param name="first_input" type="data" format="peptideprophet_pepxml" label="Peptide Prophet Results" help="These files will typically be outputs from search tools that have subsequently been run through peptide prophet"/> 	
		
	<repeat name="input_files" title="Additional PepXML Input Files">
		<param format="peptideprophet_pepxml" name="additional_input" type="data" label="PepXML produced by Peptide Prophet" help=""/>
	</repeat>
	
	<param name="use_nss" checked="true" type="boolean" label="Include NSS in Model" help="Include NSS (Number of Sibling Searches) in Statistical Model" truevalue="blank" falsevalue="--nonss"/>
	<param name="use_nrs" checked="true" type="boolean" label="Include NRS in Model" help="Include NRS (Number of Replicate Spectra) in Statistical Model" truevalue="blank" falsevalue="--nonrs"/>
	<param name="use_nse" checked="true" type="boolean" label="Include NSE in Model" help="Include NSE (Number of Sibling Experiments) in Statistical Model" truevalue="blank" falsevalue="--nonse"/>
	<param name="use_nsi" checked="true" type="boolean" label="Include NSI in Model" help="Include NSI (Number of Sibling Ions) in Statistical Model" truevalue="blank" falsevalue="--nonsi"/>
	<param name="use_nsm" checked="true" type="boolean" label="Include NSM in Model" help="Include NSM (Number of Sibling Modifications) in Statistical Model" truevalue="blank" falsevalue="--nonsm"/>
	
	<param name="minprob" type="text" label="Minimum threshod probability for reporting results"/>
		
  </inputs>
  <outputs>
    <data format="interprophet_pepxml" name="output" metadata_source="first_input" label="interprophet.${first_input.display_name}" from_work_dir="interprophet_output.pep.xml"/>
  </outputs>

  <help>
	Run InterProphet
  </help>

</tool>
